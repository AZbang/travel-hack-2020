{"version":3,"sources":["ui/header.js","profile.js","Home/index.js","useQuery.js","Challenge/index.js","Trip/index.js","App.js","index.js"],"names":["Header","styled","header","_templateObject","_ref","fixed","HeaderTitle","h1","_templateObject2","basicProfile","name","balance","trips","data","map","v","profile","JSON","parse","localStorage","getItem","completeChallenge","trip","challenge","image","add","setItem","stringify","getSaved","Profile","section","Home_templateObject","UserName","Home_templateObject2","Balance","p","_templateObject3","TravelList","_templateObject4","TravelCard","div","_templateObject5","TravelCardTitle","_templateObject6","TravelCardBonus","_templateObject7","ChellengesList","_templateObject8","ChellengeIcon","_templateObject9","complete","css","_templateObject10","ProgressLine","_templateObject11","_ref2","progress","concat","Home","react_default","a","createElement","_ref3","id","challenges","key","_ref4","icon","react_router_dom","to","src","filter","length","reduce","acc","i","bonus","currentBonus","totalBonus","useQuery","hashes","window","location","hash","slice","indexOf","split","params","_hash$split","_hash$split2","Object","slicedToArray","val","decodeURIComponent","Challenge_templateObject","rotation","keyframes","Challenge_templateObject2","Button","img","Challenge_templateObject3","button","Challenge_templateObject4","isLoading","isDisable","Preview","Challenge_templateObject5","PreviewLabel","Challenge_templateObject6","PreviewBonus","Challenge_templateObject7","Content","Challenge_templateObject8","Description","Challenge_templateObject9","Tutor","Challenge_templateObject10","PhotoArea","Challenge_templateObject11","_ref5","PhotoAreaText","_templateObject12","PhotoAreaIcon","_templateObject13","ErrorLog","_templateObject14","withRouter","_ref6","history","_useQuery","_useState","useState","_useState2","status","setStatus","_useState3","_useState4","shareImage","setShareImage","_useState5","_useState6","verify","setVerify","_useState7","_useState8","setImage","_useState9","_useState10","log","setLog","uploadImage","_ref7","asyncToGenerator","regenerator_default","mark","_callee","_data","wrap","_context","prev","next","abrupt","getImage","sent","verifyImage","t0","stop","apply","this","arguments","_ref8","_callee2","base64","formData","response","body","isVerify","_context2","b64photo","fetch","method","text","t1","call","is_selfie","landmarks","some","toLowerCase","trigger","filename","t2","console","toString","_x","Promise","resolve","reject","navigator","camera","getPicture","quality","allowEdit","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","destinationType","DestinationType","DATA_URL","shareStory","IGStory","backgroundImage","stickerImage","shareToStory","handleShare","_ref9","_callee3","_context3","push","description","onClick","Fragment","width","height","LeafletMap","ReactLeaflet","TileLayer","Marker","Card","Trip_templateObject","CardTitle","Trip_templateObject2","Challenge","Trip_templateObject3","Trip_templateObject4","ChallengeIcon","Trip_templateObject5","Trip_templateObject6","ChallengeContent","Trip_templateObject7","CompleteCard","Trip_templateObject8","isShowComplete","setShowComplete","useEffect","timer","document","addEventListener","style","overflow","setTimeout","clearTimeout","center","lat","lng","zoom","Trip_TileLayer","url","challange","Icon","L","iconUrl","iconRetinaUrl","iconAnchor","iconSize","Trip_Marker","position","Trip_Challenge","alt","App","react_router","path","src_Challenge","src_Trip","src_Home","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.328ebbdc.chunk.js","sourcesContent":["import styled, { css } from \"styled-components\";\n\nexport const Header = styled.header`\n  position: ${({ fixed }) => fixed && \"fixed\"};\n  z-index: 1000;\n  height: 70px;\n  width: 100vw;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  background-color: #00b956;\n`;\n\nexport const HeaderTitle = styled.h1`\n  font-size: 28px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 0.93;\n  letter-spacing: -0.19px;\n  text-align: center;\n  color: #ffffff;\n`;\n","import data from \"./data.json\";\n\nconst basicProfile = {\n  name: \"HBNSKY\",\n  balance: 0,\n  trips: data.map(v => [])\n};\n\nexport const profile =\n  JSON.parse(localStorage.getItem(\"profile\") || \"null\") || basicProfile;\n\nexport const completeChallenge = (trip, challenge, image, add) => {\n  profile.trips[trip][challenge] = image;\n  profile.balance += add;\n  localStorage.setItem(\"profile\", JSON.stringify(profile));\n};\n\nexport const getProgress = trip => {\n  return (\n    (profile.trips[trip].filter(v => v).length / data[trip].challenges.length) *\n    100\n  );\n};\n\nexport const totalBonus = trip =>\n  data[trip].challenges.reduce((acc, { bonus }) => acc + bonus, 0);\n\nexport const currentBonus = trip =>\n  data[trip].challenges.reduce((acc, { bonus }, i) => {\n    if (profile.trips[trip][i]) return acc + bonus;\n    return acc;\n  }, 0);\n\nexport const getSaved = (trip, challenge) => profile.trips[trip][challenge];\n","import React, { useState } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport { Header, HeaderTitle } from \"../ui/header\";\n\nimport data from \"../data.json\";\nimport {\n  profile,\n  getSaved,\n  getProgress,\n  totalBonus,\n  currentBonus\n} from \"../profile\";\n\nconst Profile = styled.section`\n  padding: 0 20px;\n  border: solid 1px #dddddd;\n  background-color: #ffffff;\n  padding: 23px 25px;\n`;\n\nconst UserName = styled.h1`\n  font-size: 24px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.17px;\n  color: #2b2b2b;\n  margin: 0;\n  margin-bottom: 8px;\n`;\n\nconst Balance = styled.p`\n  font-size: 14px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  color: #00b956;\n  margin: 0;\n`;\n\nconst TravelList = styled.section`\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  padding: 20px 13px;\n`;\n\nconst TravelCard = styled.div`\n  border-radius: 11px;\n  box-shadow: 0 0 11px 0 rgba(0, 0, 0, 0.05);\n  background-color: #fffffe;\n  padding: 10px 17px;\n  margin-bottom: 20px;\n  a {\n    text-decoration: none;\n  }\n`;\n\nconst TravelCardTitle = styled.h1`\n  font-size: 24px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.17px;\n  color: #00b956;\n  margin: 0;\n  margin-top: 6px;\n  margin-bottom: 10px;\n`;\n\nconst TravelCardBonus = styled.p`\n  font-size: 14px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  color: #474747;\n  margin: 0;\n  margin-top: 10px;\n  margin-bottom: 5px;\n`;\n\nconst ChellengesList = styled.div`\n  width: calc(100% + 30px);\n  margin-left: -15px;\n  display: flex;\n  overflow-x: auto;\n`;\n\nconst ChellengeIcon = styled.div`\n  width: 84px;\n  height: 84px;\n  margin: 0 5px;\n  position: relative;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  ${({ complete }) =>\n    complete &&\n    css`\n      &:before {\n        content: \"\";\n        position: absolute;\n        left: 100%;\n        width: 20px;\n        height: 20px;\n        margin: 4px -30px;\n        background-color: #731a82;\n        border-radius: 50%;\n      }\n    `}\n`;\n\nconst ProgressLine = styled.div`\n  height: 3.5px;\n  border-radius: 1.8px;\n  background-color: #e4e4e4;\n  width: 100%;\n  position: relative;\n  &:after {\n    content: \"\";\n    position: absolute;\n    background-color: #00b956;\n    height: 3.5px;\n    transition: 0.5s all;\n    width: ${({ progress }) => `calc(100% * ${progress / 100})`};\n  }\n`;\n\nconst Home = () => {\n  return (\n    <section>\n      <Header>\n        <HeaderTitle>Кешбэк</HeaderTitle>\n      </Header>\n      <Profile>\n        <UserName>{profile.name}</UserName>\n        <Balance>Заработано: {profile.balance} ₽</Balance>\n      </Profile>\n      <TravelList>\n        {data.map(({ name, challenges }, id) => (\n          <TravelCard key={id}>\n            <ChellengesList>\n              {challenges.map(({ icon }, challenge) => (\n                <Link\n                  key={challenge}\n                  to={`/challenge?trip=${id}&challenge=${challenge}`}\n                >\n                  <ChellengeIcon complete={!!getSaved(id, challenge)}>\n                    <img src={icon} />\n                  </ChellengeIcon>\n                </Link>\n              ))}\n            </ChellengesList>\n            <Link to={`/trip?id=${id}`}>\n              <TravelCardTitle>{name}</TravelCardTitle>\n              <ProgressLine progress={getProgress(id)} />\n              <TravelCardBonus>\n                {currentBonus(id)} ₽ / {totalBonus(id)} ₽\n              </TravelCardBonus>\n            </Link>\n          </TravelCard>\n        ))}\n      </TravelList>\n    </section>\n  );\n};\n\nexport default Home;\n","export default function useQuery() {\n  const hashes = window.location.hash\n    .slice(window.location.hash.indexOf(\"?\") + 1)\n    .split(\"&\");\n  const params = {};\n  hashes.map(hash => {\n    const [key, val] = hash.split(\"=\");\n    params[key] = decodeURIComponent(val);\n  });\n  return params;\n}\n","import React, { useState } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport { withRouter } from \"react-router-dom\";\n\nimport data from \"../data.json\";\nimport useQuery from \"../useQuery\";\nimport { completeChallenge, getSaved } from \"../profile\";\n\nconst Wrap = styled.div`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst rotation = keyframes`\n\t0% {\n\t\ttransform: rotate(360deg);\n\t}\n\t100% {\n\t\ttransform: rotate(0deg);\n\t}\n`;\n\nconst Spinner = styled.img`\n  width: 28px;\n  height: 28px;\n  animation: ${rotation} 2s linear infinite;\n`;\n\nconst Button = styled.button`\n  margin-top: 20px;\n  border-radius: 10px;\n  width: 100%;\n  height: 56px;\n  padding: 0 20px;\n  border: none;\n  font-size: 20px;\n  font-weight: 600;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.2;\n  letter-spacing: 0.38px;\n  text-align: center;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  color: ${({ isLoading }) =>\n    isLoading ? \"rgba(60, 60, 67, 0.6)\" : \"#ffffff\"};\n  background-color: ${({ isLoading, isDisable }) =>\n    isLoading ? \"#d6d6d6\" : isDisable ? \"rgba(0, 185, 86, 0.5)\" : \"#00b956\"};\n\n  img {\n    display: block;\n    margin-right: 10px;\n  }\n`;\n\nconst Preview = styled.section`\n  width: 100vw;\n  height: 200px;\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: column;\n  position: relative;\n  background-image: ${({\n    image\n  }) => `linear-gradient(to bottom, rgba(0, 0, 0, 0) 45%, #000000),\n\t\turl(${image})`};\n  background-position: center;\n  background-size: cover;\n`;\n\nconst PreviewLabel = styled.h1`\n  font-size: 21px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 0.95;\n  letter-spacing: -0.34px;\n  color: #ffffff;\n  margin: 0;\n  margin-left: 15px;\n  margin-bottom: 5px;\n`;\n\nconst PreviewBonus = styled.p`\n  font-size: 16px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.13;\n  letter-spacing: -0.1px;\n  color: #00b956;\n  margin: 0;\n  margin-left: 15px;\n  margin-bottom: 15px;\n`;\n\nconst Content = styled.div`\n  padding: 13px 15px;\n`;\n\nconst Description = styled.p`\n  font-size: 16px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  color: #3a3a3a;\n`;\n\nconst Tutor = styled(Description)`\n  color: #00b956;\n`;\n\nconst PhotoArea = styled.div`\n  height: 350px;\n  border-radius: 5px;\n  border: ${({ image }) => !image && \"dashed 3px #c5c5c5\"};\n  background-position: center;\n  background-size: cover;\n  background-image: ${({ image }) => image && `url(${image})`};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst PhotoAreaText = styled.p`\n  font-size: 16px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  text-align: center;\n  color: #c5c5c5;\n  margin: 0;\n`;\n\nconst PhotoAreaIcon = styled.p`\n  margin: 0;\n  font-size: 48px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.29px;\n  text-align: center;\n  color: #c5c5c5;\n`;\n\nconst ErrorLog = styled.p`\n  font-size: 12px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: 0.23px;\n  text-align: center;\n  color: #c11a1a;\n`;\n\nconst Challenge = ({ history }) => {\n  const { trip, challenge: id } = useQuery();\n  const challenge = data[trip].challenges[id];\n  const isCompleted = !!getSaved(trip, id);\n\n  const [status, setStatus] = useState(false);\n  const [shareImage, setShareImage] = useState(null);\n  const [verify, setVerify] = useState(false);\n  const [image, setImage] = useState(getSaved(trip, id));\n  const [log, setLog] = useState(null);\n\n  const uploadImage = async () => {\n    if (status) return;\n\n    try {\n      const data = await getImage();\n      setImage(\"data:image/jpeg;base64,\" + data);\n      setVerify(false);\n\n      await verifyImage(data);\n    } catch {\n      setLog(null);\n    }\n\n    // const file = document.querySelector(\"#challengeImage > input[type='file']\");\n    // const submit = document.querySelector(\n    //   \"#challengeImage > input[type='submit']\"\n    // );\n    // const onChange = e => {\n    //   const reader = new FileReader();\n    //   reader.onloadend = () => {\n    //     setImage(reader.result);\n    //   };\n    //   if (file.files[0]) {\n    //     setVerify(false);\n    //     reader.readAsDataURL(file.files[0]);\n    //     submit.click();\n    //   }\n    // };\n    // file.click();\n    // file.addEventListener(\"change\", onChange);\n  };\n\n  const verifyImage = async base64 => {\n    if (status) return false;\n\n    try {\n      setStatus(true);\n      //const formData = new FormData(document.querySelector(\"#challengeImage\"));\n      //setLog(\"create formData\");\n      const formData = { b64photo: base64, trip: data[trip].name };\n      const response = await fetch(\"http://85.143.218.224/process_photo\", {\n        method: \"POST\",\n        body: JSON.stringify(formData)\n      });\n      //setLog(null);\n\n      const body = JSON.parse(await response.text());\n      const isVerify =\n        body.is_selfie &&\n        body.landmarks.some(v => v.toLowerCase() === challenge.trigger);\n      setVerify(isVerify);\n      if (isVerify) setShareImage(\"http://85.143.218.224/img/\" + body.filename);\n      else setLog(\"К сожалению Ваше фото не подходит для этого челенджа.\");\n    } catch (e) {\n      console.log(e);\n      setLog(e.toString());\n    }\n\n    setStatus(false);\n    return false;\n  };\n\n  const getImage = () => {\n    return new Promise((resolve, reject) => {\n      if (!navigator.camera) return reject();\n      navigator.camera.getPicture(resolve, reject, {\n        quality: 50,\n        allowEdit: true,\n        sourceType: window.Camera.PictureSourceType.PHOTOLIBRARY,\n        //cameraDirection: window.Camera.Direction.FRONT,\n        destinationType: window.Camera.DestinationType.DATA_URL\n      });\n    });\n  };\n\n  const shareStory = image => {\n    return new Promise((resolve, reject) => {\n      if (!window.IGStory) return reject();\n      const params = {\n        backgroundImage: \"https://i.ibb.co/vPsxXqh/Story.png\",\n        stickerImage: image\n      };\n      window.IGStory.shareToStory(params, resolve, reject);\n    });\n  };\n\n  const handleShare = async () => {\n    if (!verify || !shareImage) return;\n    try {\n      setStatus(true);\n      await shareStory(shareImage);\n      completeChallenge(trip, id, shareImage, challenge.bonus);\n      history.push(`/trip?id=${trip}&complete=${id}`);\n    } catch (e) {\n      setLog(\"Ошибка, невозможно опубликовать сторис!\");\n    }\n    setStatus(false);\n  };\n\n  return (\n    <section>\n      <Preview image={challenge.image}>\n        <PreviewLabel>{challenge.name}</PreviewLabel>\n        <PreviewBonus>{challenge.bonus} ₽</PreviewBonus>\n      </Preview>\n\n      <Content>\n        <Description>{challenge.description}</Description>\n        <Tutor>Сделайте селфи на его фоне и опубликуйте в истории!</Tutor>\n        <PhotoArea image={image} onClick={uploadImage}>\n          {/* <form onSubmit={verifyImage} id=\"challengeImage\" hidden>\n            <input name=\"photo\" accept=\"image/*\" capture=\"camera\" type=\"file\" />\n            <input type=\"submit\" />\n          </form> */}\n\n          {!image && (\n            <>\n              <PhotoAreaIcon>+</PhotoAreaIcon>\n              <PhotoAreaText>СДЕЛАТЬ ФОТО</PhotoAreaText>\n            </>\n          )}\n        </PhotoArea>\n\n        <ErrorLog>{log}</ErrorLog>\n\n        <Button isLoading={status} isDisable={!verify} onClick={handleShare}>\n          {status ? (\n            <img width={36} height={36} src=\"Spinner.gif\" />\n          ) : (\n            <img src=\"insta.svg\" />\n          )}\n          {status && verify\n            ? \"Публикуем в сторисы...\"\n            : status\n            ? \"Проверяем...\"\n            : \"Поделиться в Instagram\"}\n        </Button>\n      </Content>\n    </section>\n  );\n};\n\nexport default withRouter(Challenge);\n","import React, { useEffect, useState } from \"react\";\nimport * as ReactLeaflet from \"react-leaflet\";\nimport styled, { css, keyframes } from \"styled-components\";\n\nimport L from \"leaflet\";\nimport { withRouter } from \"react-router-dom\";\n\nimport data from \"../data.json\";\nimport useQuery from \"../useQuery\";\nimport { Header, HeaderTitle } from \"../ui/header\";\nimport { getSaved } from \"../profile.js\";\n\nconst { Map: LeafletMap, TileLayer, Marker, Popup } = ReactLeaflet;\n\nconst Card = styled.div`\n  border-radius: 10px 10px 0 0;\n  background: #fff;\n  z-index: 10000;\n  box-shadow: 0 -1px 13px 1px rgba(0, 0, 0, 0.15);\n  background-color: #ffffff;\n  padding: 18px;\n`;\n\nconst CardTitle = styled.h1`\n  font-size: 24px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.17px;\n  color: #731982;\n  margin: 0;\n`;\n\nconst ChallengesList = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Challenge = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  border-bottom: solid 2px rgba(0, 0, 0, 0.1);\n  padding-bottom: 15px;\n`;\n\nconst ChallengeIcon = styled.div`\n  width: 72px;\n  height: 72px;\n  margin-right: 20px;\n  position: relative;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  ${({ complete }) =>\n    complete &&\n    css`\n      &:before {\n        content: \"\";\n        position: absolute;\n        left: 100%;\n        width: 20px;\n        height: 20px;\n        margin: 4px -30px;\n        background-color: #731a82;\n        border-radius: 50%;\n      }\n    `}\n`;\n\nconst ChallengeContent = styled.div`\n  h1 {\n    font-size: 21px;\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 0.95;\n    letter-spacing: -0.34px;\n    color: #731982;\n    margin: 0;\n    margin-bottom: 5px;\n  }\n  p {\n    font-size: 14px;\n    font-weight: 500;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 0.9;\n    letter-spacing: -0.16px;\n    color: #3a3a3a;\n    margin: 0;\n  }\n`;\n\nconst CompleteCard = styled.div`\n  position: fixed;\n  left: 50%;\n  top: 150px;\n  margin-left: -40%;\n  position: fixed;\n  z-index: 10000;\n  width: 80%;\n  border-radius: 9px;\n  box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.15);\n  background-color: #ffffff;\n  text-align: center;\n  padding: 80px 0 50px;\n\n  h1 {\n    font-size: 36px;\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: -0.22px;\n    color: #731982;\n  }\n\n  p {\n    font-size: 21px;\n    font-weight: 500;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: -0.13px;\n    text-align: center;\n    color: #3a3a3a;\n  }\n\n  span {\n    color: #00b956;\n  }\n`;\n\nconst CustomMarker = ({ icon, position }) => {\n  const Icon = new L.Icon({\n    iconUrl: icon,\n    iconRetinaUrl: icon,\n    iconAnchor: [32, 32],\n    iconSize: [64, 64]\n  });\n\n  return <Marker icon={Icon} position={position} />;\n};\n\nconst Trip = ({ history }) => {\n  const { id, complete } = useQuery();\n  const [isShowComplete, setShowComplete] = useState(!!complete);\n  const trip = data[id];\n\n  useEffect(() => {\n    if (!complete) return;\n    let timer = null;\n    document.addEventListener(\n      \"resume\",\n      () => {\n        document.body.style.overflow = \"hidden\";\n        timer = setTimeout(() => {\n          document.body.style.overflow = \"\";\n          setShowComplete(false);\n        }, 5000);\n      },\n      false\n    );\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  return (\n    <>\n      <Header fixed={true}>\n        <HeaderTitle>{trip.name}</HeaderTitle>\n      </Header>\n      {isShowComplete && (\n        <CompleteCard>\n          <img src=\"check.svg\" />\n          <h1>Отлично!</h1>\n          <p>\n            <span>{trip.challenges[complete].bonus} ₽</span> за{\" \"}\n            {trip.challenges[complete].name} зачислены на ваш счет.\n          </p>\n        </CompleteCard>\n      )}\n      <LeafletMap center={[trip.lat || 0, trip.lng || 0]} zoom={trip.zoom}>\n        <TileLayer url=\"https://{s}.tile.osm.org/{z}/{x}/{y}.png\" />\n        {trip.challenges.map(({ icon }, challange) => {\n          const Icon = new L.Icon({\n            iconUrl: icon,\n            iconRetinaUrl: icon,\n            iconAnchor: [32, 32],\n            iconSize: [64, 64]\n          });\n\n          return (\n            <Marker\n              onClick={() =>\n                history.push(`/challenge?trip=${id}&challenge=${challange}`)\n              }\n              icon={Icon}\n              key={challange}\n              position={[trip.lat || 0, trip.lng || 0]}\n            />\n          );\n        })}\n      </LeafletMap>\n      <Card>\n        <CardTitle>Челленджи</CardTitle>\n        {trip.challenges.map(({ icon, name, description }, challange) => (\n          <Challenge key={challange}>\n            <ChallengeIcon complete={!!getSaved(id, challange)}>\n              <img src={icon} alt={name} />\n            </ChallengeIcon>\n            <ChallengeContent>\n              <h1>{name}</h1>\n              <p>{description}</p>\n            </ChallengeContent>\n          </Challenge>\n        ))}\n      </Card>\n    </>\n  );\n};\n\nexport default withRouter(Trip);\n","import React from \"react\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useLocation\n} from \"react-router-dom\";\n\nimport Home from \"./Home\";\nimport Challenge from \"./Challenge\";\nimport Trip from \"./Trip\";\n\nconst App = () => {\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route path=\"/challenge\">\n            <Challenge />\n          </Route>\n          <Route path=\"/trip\">\n            <Trip />\n          </Route>\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}
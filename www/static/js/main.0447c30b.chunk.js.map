{"version":3,"sources":["ui/header.js","Home/index.js","useQuery.js","Challenge/index.js","Trip/index.js","App.js","index.js"],"names":["Header","styled","header","_templateObject","_ref","fixed","HeaderTitle","h1","_templateObject2","Profile","section","Home_templateObject","UserName","Home_templateObject2","Balance","p","_templateObject3","TravelList","_templateObject4","TravelCard","div","_templateObject5","TravelCardTitle","_templateObject6","TravelCardBonus","_templateObject7","ChellengesList","_templateObject8","ChellengeIcon","img","_templateObject9","ProgressLine","_templateObject10","progress","concat","Home","react_default","a","createElement","data","map","_ref2","id","name","challenges","key","_ref3","challenge","icon","react_router_dom","to","src","useQuery","hashes","window","location","search","slice","indexOf","split","params","hash","_hash$split","_hash$split2","Object","slicedToArray","val","decodeURIComponent","Challenge_templateObject","rotation","keyframes","Challenge_templateObject2","Spinner","Challenge_templateObject3","Button","button","Challenge_templateObject4","isLoading","isDisable","Preview","Challenge_templateObject5","image","PreviewLabel","Challenge_templateObject6","PreviewBonus","Challenge_templateObject7","Content","Challenge_templateObject8","Description","Challenge_templateObject9","Tutor","Challenge_templateObject10","PhotoArea","_templateObject11","_ref4","_ref5","PhotoAreaText","_templateObject12","PhotoAreaIcon","_templateObject13","ErrorLog","_templateObject14","Challenge","_useQuery","trip","_useState","useState","_useState2","status","setStatus","_useState3","_useState4","shareImage","setShareImage","_useState5","_useState6","verify","setVerify","_useState7","_useState8","setImage","_useState9","_useState10","log","setLog","uploadImage","_ref6","asyncToGenerator","regenerator_default","mark","_callee","_data","wrap","_context","prev","next","abrupt","getImage","sent","verifyImage","t0","stop","apply","this","arguments","_ref7","_callee2","base64","formData","response","body","isVerify","_context2","b64photo","fetch","method","JSON","stringify","text","t1","parse","call","is_selfie","landmarks","some","v","toLowerCase","trigger","filename","join","t2","console","toString","_x","Promise","resolve","reject","navigator","camera","getPicture","quality","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","allowEdit","destinationType","DestinationType","DATA_URL","shareStory","backgroundImage","IGStory","attributionURL","shareToStory","handleShare","_ref8","_callee3","_context3","bonus","description","onClick","Fragment","LeafletMap","ReactLeaflet","TileLayer","Marker","Card","Trip_templateObject","CardTitle","Trip_templateObject2","withRouter","history","center","lat","lng","zoom","Trip_TileLayer","url","challange","Icon","L","iconUrl","iconRetinaUrl","iconAnchor","iconSize","Trip_Marker","push","position","App","react_router","path","src_Challenge","src_Trip","src_Home","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0447c30b.chunk.js","sourcesContent":["import styled, { css } from \"styled-components\";\n\nexport const Header = styled.header`\n  position: ${({ fixed }) => fixed && \"fixed\"};\n  z-index: 1000;\n  height: 70px;\n  width: 100vw;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  background-color: #00b956;\n`;\n\nexport const HeaderTitle = styled.h1`\n  font-size: 28px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 0.93;\n  letter-spacing: -0.19px;\n  text-align: center;\n  color: #ffffff;\n`;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport { Header, HeaderTitle } from \"../ui/header\";\n\nimport data from \"../data.json\";\n\nconst Profile = styled.section`\n  padding: 0 20px;\n  border: solid 1px #dddddd;\n  background-color: #ffffff;\n  padding: 23px 25px;\n`;\n\nconst UserName = styled.h1`\n  font-size: 24px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.17px;\n  color: #2b2b2b;\n  margin: 0;\n  margin-bottom: 8px;\n`;\n\nconst Balance = styled.p`\n  font-size: 14px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  color: #00b956;\n  margin: 0;\n`;\n\nconst TravelList = styled.section`\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  padding: 20px 13px;\n`;\n\nconst TravelCard = styled.div`\n  border-radius: 11px;\n  box-shadow: 0 0 11px 0 rgba(0, 0, 0, 0.05);\n  background-color: #fffffe;\n  padding: 10px 17px;\n  margin-bottom: 20px;\n  a {\n    text-decoration: none;\n  }\n`;\n\nconst TravelCardTitle = styled.h1`\n  font-size: 24px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.17px;\n  color: #00b956;\n  margin: 0;\n  margin-top: 6px;\n  margin-bottom: 10px;\n`;\n\nconst TravelCardBonus = styled.p`\n  font-size: 14px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  color: #474747;\n  margin: 0;\n  margin-top: 10px;\n  margin-bottom: 5px;\n`;\n\nconst ChellengesList = styled.div`\n  width: calc(100% + 30px);\n  margin-left: -15px;\n  display: flex;\n  overflow-x: auto;\n`;\n\nconst ChellengeIcon = styled.img`\n  width: 84px;\n  height: 84px;\n  margin: 0 5px;\n  display: block;\n`;\n\nconst ProgressLine = styled.div`\n  height: 3.5px;\n  border-radius: 1.8px;\n  background-color: #e4e4e4;\n  width: 100%;\n  position: relative;\n  &:after {\n    content: \"\";\n    position: absolute;\n    background-color: #00b956;\n    height: 3.5px;\n    transition: 0.5s all;\n    width: ${({ progress }) => `calc(100% * ${progress / 100})`};\n  }\n`;\n\nconst Home = () => {\n  return (\n    <section>\n      <Header>\n        <HeaderTitle>Кешбэк</HeaderTitle>\n      </Header>\n      <Profile>\n        <UserName>Марина</UserName>\n        <Balance>Заработано: 145345 руб</Balance>\n      </Profile>\n      <TravelList>\n        {data.map(({ name, challenges }, id) => (\n          <TravelCard key={id}>\n            <ChellengesList>\n              {challenges.map(({ icon }, challenge) => (\n                <Link\n                  key={challenge}\n                  to={`/challenge?trip=${id}&challenge=${challenge}`}\n                >\n                  <ChellengeIcon src={icon} />\n                </Link>\n              ))}\n            </ChellengesList>\n            <Link to={`/trip?id=${id}`}>\n              <TravelCardTitle>{name}</TravelCardTitle>\n            </Link>\n            <ProgressLine progress={30} />\n            <TravelCardBonus>685 ₽ / 1000 ₽</TravelCardBonus>\n          </TravelCard>\n        ))}\n      </TravelList>\n    </section>\n  );\n};\n\nexport default Home;\n","export default function useQuery() {\n  const hashes = window.location.search\n    .slice(window.location.search.indexOf(\"?\") + 1)\n    .split(\"&\");\n  const params = {};\n  hashes.map(hash => {\n    const [key, val] = hash.split(\"=\");\n    params[key] = decodeURIComponent(val);\n  });\n  return params;\n}\n","import React, { useState } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport data from \"../data.json\";\nimport useQuery from \"../useQuery\";\n\nconst Wrap = styled.div`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst rotation = keyframes`\n\t0% {\n\t\ttransform: rotate(360deg);\n\t}\n\t100% {\n\t\ttransform: rotate(0deg);\n\t}\n`;\n\nconst Spinner = styled.img`\n  width: 28px;\n  height: 28px;\n  animation: ${rotation} 2s linear infinite;\n`;\n\nconst Button = styled.button`\n  margin-top: 20px;\n  border-radius: 10px;\n  width: 100%;\n  height: 56px;\n  padding: 0 20px;\n  border: none;\n  font-size: 20px;\n  font-weight: 600;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.2;\n  letter-spacing: 0.38px;\n  text-align: center;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  color: ${({ isLoading }) =>\n    isLoading ? \"rgba(60, 60, 67, 0.6)\" : \"#ffffff\"};\n  background-color: ${({ isLoading, isDisable }) =>\n    isLoading ? \"#d6d6d6\" : isDisable ? \"rgba(0, 185, 86, 0.5)\" : \"#00b956\"};\n\n  img {\n    display: block;\n    margin-right: 10px;\n  }\n`;\n\nconst Preview = styled.section`\n  width: 100vw;\n  height: 200px;\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: column;\n  position: relative;\n  background-image: ${({\n    image\n  }) => `linear-gradient(to bottom, rgba(0, 0, 0, 0) 45%, #000000),\n\t\turl(${image})`};\n  background-position: center;\n  background-size: cover;\n`;\n\nconst PreviewLabel = styled.h1`\n  font-size: 21px;\n  font-weight: bold;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 0.95;\n  letter-spacing: -0.34px;\n  color: #ffffff;\n  margin: 0;\n  margin-left: 15px;\n  margin-bottom: 5px;\n`;\n\nconst PreviewBonus = styled.p`\n  font-size: 16px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: 1.13;\n  letter-spacing: -0.1px;\n  color: #00b956;\n  margin: 0;\n  margin-left: 15px;\n  margin-bottom: 15px;\n`;\n\nconst Content = styled.div`\n  padding: 13px 15px;\n`;\n\nconst Description = styled.p`\n  font-size: 16px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  color: #3a3a3a;\n`;\n\nconst Tutor = styled(Description)`\n  color: #00b956;\n`;\n\nconst PhotoArea = styled.div`\n  height: 250px;\n  border-radius: 5px;\n  border: ${({ image }) => !image && \"dashed 3px #c5c5c5\"};\n  background-position: center;\n  background-size: cover;\n  background-image: ${({ image }) => image && `url(${image})`};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst PhotoAreaText = styled.p`\n  font-size: 16px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.1px;\n  text-align: center;\n  color: #c5c5c5;\n  margin: 0;\n`;\n\nconst PhotoAreaIcon = styled.p`\n  margin: 0;\n  font-size: 48px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.29px;\n  text-align: center;\n  color: #c5c5c5;\n`;\n\nconst ErrorLog = styled.p`\n  font-size: 12px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: 0.23px;\n  text-align: center;\n  color: #c11a1a;\n`;\n\nconst Challenge = () => {\n  const { trip, challenge: id } = useQuery();\n  const challenge = data[trip].challenges[id];\n\n  const [status, setStatus] = useState(false);\n  const [shareImage, setShareImage] = useState(null);\n  const [verify, setVerify] = useState(false);\n  const [image, setImage] = useState(null);\n  const [log, setLog] = useState(null);\n\n  const uploadImage = async () => {\n    if (status) return;\n\n    try {\n      const data = await getImage();\n      setImage(\"data:image/jpeg;base64,\" + data);\n      setVerify(false);\n\n      await verifyImage(data);\n    } catch {\n      setLog(null);\n    }\n\n    // const file = document.querySelector(\"#challengeImage > input[type='file']\");\n    // const submit = document.querySelector(\n    //   \"#challengeImage > input[type='submit']\"\n    // );\n    // const onChange = e => {\n    //   const reader = new FileReader();\n    //   reader.onloadend = () => {\n    //     setImage(reader.result);\n    //   };\n    //   if (file.files[0]) {\n    //     setVerify(false);\n    //     reader.readAsDataURL(file.files[0]);\n    //     submit.click();\n    //   }\n    // };\n    // file.click();\n    // file.addEventListener(\"change\", onChange);\n  };\n\n  const verifyImage = async base64 => {\n    if (status) return false;\n\n    try {\n      setStatus(true);\n      //const formData = new FormData(document.querySelector(\"#challengeImage\"));\n      //setLog(\"create formData\");\n      const formData = { b64photo: base64, trip: data[trip].name };\n      const response = await fetch(\"http://85.143.218.224/process_photo\", {\n        method: \"POST\",\n        body: JSON.stringify(formData)\n      });\n      //setLog(null);\n\n      const body = JSON.parse(await response.text());\n      const isVerify =\n        body.is_selfie &&\n        body.landmarks.some(v => v.toLowerCase() === challenge.trigger);\n      setVerify(isVerify);\n      if (isVerify) setShareImage(\"http://85.143.218.224/img/\" + body.filename);\n      else setLog(body.landmarks.join(\", \") + \" \" + challenge.trigger);\n    } catch (e) {\n      console.log(e);\n      setLog(e.toString());\n    }\n\n    setStatus(false);\n    return false;\n  };\n\n  const getImage = () => {\n    return new Promise((resolve, reject) => {\n      if (!navigator.camera) return reject();\n      navigator.camera.getPicture(resolve, reject, {\n        quality: 50,\n        sourceType: window.Camera.PictureSourceType.PHOTOLIBRARY,\n        allowEdit: true,\n        destinationType: window.Camera.DestinationType.DATA_URL\n      });\n    });\n  };\n\n  const shareStory = backgroundImage => {\n    return new Promise((resolve, reject) => {\n      if (!window.IGStory) return reject();\n      const params = {\n        backgroundImage,\n        attributionURL: \"https://www.my-aweseome-app.com/p/BhzbIOUBval/\"\n      };\n      window.IGStory.shareToStory(params, resolve, reject);\n    });\n  };\n\n  const handleShare = async () => {\n    setLog(shareImage);\n    //if (!verify || !shareImage) return;\n    try {\n      await shareStory(shareImage);\n    } catch (e) {\n      setLog(\"Ошибка, невозможно опубликовать сторис!\");\n    }\n  };\n\n  return (\n    <section>\n      <Preview image={challenge.image}>\n        <PreviewLabel>{challenge.name}</PreviewLabel>\n        <PreviewBonus>{challenge.bonus} ₽</PreviewBonus>\n      </Preview>\n\n      <Content>\n        <Description>{challenge.description}</Description>\n        <Tutor>Сделайте селфи на его фоне!</Tutor>\n        <PhotoArea image={image} onClick={uploadImage}>\n          {/* <form onSubmit={verifyImage} id=\"challengeImage\" hidden>\n            <input name=\"photo\" accept=\"image/*\" capture=\"camera\" type=\"file\" />\n            <input type=\"submit\" />\n          </form> */}\n\n          {!image && (\n            <>\n              <PhotoAreaIcon>+</PhotoAreaIcon>\n              <PhotoAreaText>ПРИКРЕПИТЬ ФОТО</PhotoAreaText>\n            </>\n          )}\n        </PhotoArea>\n\n        <ErrorLog>{log}</ErrorLog>\n\n        <Button isLoading={status} isDisable={!verify} onClick={handleShare}>\n          {status ? <Spinner src=\"./Spinner.png\" /> : <img src=\"./insta.svg\" />}\n          {status ? \"Проверяем...\" : \"Поделиться в Instagram\"}\n        </Button>\n      </Content>\n    </section>\n  );\n};\n\nexport default Challenge;\n","import React from \"react\";\nimport * as ReactLeaflet from \"react-leaflet\";\nimport styled from \"styled-components\";\n\nimport L from \"leaflet\";\nimport { withRouter } from \"react-router-dom\";\n\nimport data from \"../data.json\";\nimport useQuery from \"../useQuery\";\nimport { Header, HeaderTitle } from \"../ui/header\";\n\nconst { Map: LeafletMap, TileLayer, Marker, Popup } = ReactLeaflet;\n\nconst Card = styled.div`\n  border-radius: 10px 10px 0 0;\n  background: #fff;\n  position: fixed;\n  bottom: 0;\n  width: 100vw;\n  height: 300px;\n  z-index: 10000;\n  border-radius: 10px;\n  box-shadow: 0 -1px 13px 1px rgba(0, 0, 0, 0.15);\n  background-color: #ffffff;\n  padding: 18px;\n`;\n\nconst CardTitle = styled.h1`\n  font-size: 24px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: -0.17px;\n  color: #731982;\n  margin: 0;\n`;\n\nconst CustomMarker = ({ icon, position }) => {\n  const Icon = new L.Icon({\n    iconUrl: icon,\n    iconRetinaUrl: icon,\n    iconAnchor: [32, 32],\n    iconSize: [64, 64]\n  });\n\n  return <Marker icon={Icon} position={position} />;\n};\n\nconst Trip = ({ history }) => {\n  const { id } = useQuery();\n  const trip = data[id];\n  const position = [0, 0];\n\n  return (\n    <>\n      <Header fixed={true}>\n        <HeaderTitle>{trip.name}</HeaderTitle>\n      </Header>\n      <LeafletMap center={[trip.lat, trip.lng]} zoom={trip.zoom}>\n        <TileLayer url=\"https://{s}.tile.osm.org/{z}/{x}/{y}.png\" />\n        {trip.challenges.map(({ icon }, challange) => {\n          const Icon = new L.Icon({\n            iconUrl: icon,\n            iconRetinaUrl: icon,\n            iconAnchor: [32, 32],\n            iconSize: [64, 64]\n          });\n\n          return (\n            <Marker\n              onClick={() =>\n                history.push(`/challenge?trip=${id}&challenge=${challange}`)\n              }\n              icon={Icon}\n              key={challange}\n              position={[trip.lat, trip.lng]}\n            />\n          );\n        })}\n      </LeafletMap>\n      <Card>\n        <CardTitle>Челленджи</CardTitle>\n      </Card>\n    </>\n  );\n};\n\nexport default withRouter(Trip);\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useLocation\n} from \"react-router-dom\";\n\nimport Home from \"./Home\";\nimport Challenge from \"./Challenge\";\nimport Trip from \"./Trip\";\n\nconst App = () => {\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route path=\"/challenge\">\n            <Challenge />\n          </Route>\n          <Route path=\"/trip\">\n            <Trip />\n          </Route>\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}